<html>

<head>
  <meta charset="utf-8" content="text/html" property="GAP,francy,d3.v5">
  <link rel="stylesheet" type="text/css" href="../../dist/style/index.css">
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css">
  <script src="../../node_modules/d3/dist/d3.min.js"></script>
  <script src="../../dist/browser/francy.bundle.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML-full,Safe"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
  <title>Francy Test</title>
</head>

<body>
  <div id="francy_draw" style="visibility:hidden;"></div>
</body>

<script>
  /* global d3 Francy */

  function trigger(json) {
    console.log(`Trigger(${JSON.stringify(JSON.stringify(json))});`);
  }

  function resolvePromise(francy) {
    francy.render().catch(error => console.log(error)).then(element => {
      // NOTE: we're using a visible div to append the object so no need to do anything here
      //document.getElementsByTagName('body')[0].appendChild(element);
      if (element) {
        document.body.appendChild(element);
        console.log('Object rendered...', element);
      }
    });
  }

  let settings = { appendTo: '#francy_draw', callbackHandler: trigger };
  Francy.settings(settings);

  d3.json('json1.json').then(json => {
    resolvePromise(Francy.load(json));
  });

  d3.json('json2.json').then(json => {
    resolvePromise(Francy.load(json));
  });

  d3.json('json3.json').then(json => {
    resolvePromise(Francy.load(json));
  });

  d3.json('json4.json').then(json => {
    resolvePromise(Francy.load(json));
  });

  d3.json('json5.json').then(json => {
    resolvePromise(Francy.load(json));
  });

  d3.json('json6.json').then(json => {
    resolvePromise(Francy.load(json));
  });

  d3.json('json7.json').then(json => {
    resolvePromise(Francy.load(json));
  });
</script>

</html>
